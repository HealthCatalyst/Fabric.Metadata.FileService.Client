queue: 'Hosted VS2017'

variables:
  buildConfiguration: 'Release'

steps:
- script: |
    dotnet build --configuration $(buildConfiguration)
    dotnet test Fabric.Metadata.FileService.Client.Tests --configuration $(buildConfiguration) --logger trx
    dotnet pack Fabric.Metadata.FileService.Client --configuration Release --output $BUILD_ARTIFACTSTAGINGDIRECTORY

#- task: NuGetCommand@2
#  inputs:
#    command: push
#    nuGetFeedType: external
#    publishFeedCredentials: 'Nuget.org Health Catalyst Account'
#    versioningScheme: byEnvVar
#    versionEnvVar: Version    

- task: PublishTestResults@2
  inputs:
    testRunner: VSTest
    testResultsFiles: '**/*.trx'